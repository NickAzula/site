<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NickAzula Login</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap');

    body {
      font-family: 'Cinzel', serif;
      background-color: black;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞ */
    .top-controls {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 999; /* –ü–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .top-controls button {
      padding: 10px;
      background: linear-gradient(to right, #ff4500, #ff8c00);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      text-shadow: 0 0 5px rgba(255, 69, 0, 0.7);
      animation: flicker 0.2s infinite alternate;
    }
    .top-controls button:hover {
      background: linear-gradient(to right, #ff8c00, #ff4500);
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è (flicker) */
    @keyframes flicker {
      0% {
        box-shadow: 0 0 40px rgba(255, 69, 0, 0.9);
      }
      100% {
        box-shadow: 0 0 60px rgba(255, 140, 0, 0.9);
      }
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å "–æ–≥–Ω–µ–Ω–Ω—ã–º" –æ–±—Ä–∞–º–ª–µ–Ω–∏–µ–º */
    .fire-border {
      position: relative;
      padding: 20px;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(255, 69, 0, 0.8);
      animation: flicker 0.6s infinite alternate;
    }
    .flame {
      position: absolute;
      width: 120%;
      height: 40px;
      background: linear-gradient(orange, red);
      filter: blur(79px);
      opacity: 0.7;
      bottom: -15px;
      left: -10%;
      animation: flameEffect 1s infinite alternate ease-in-out;
      pointer-events: none;
    }
    @keyframes flameEffect {
      0% {
        transform: scaleY(1);
        opacity: 0.8;
      }
      100% {
        transform: scaleY(1.3);
        opacity: 0.5;
      }
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞–≤–µ—Ä—Ö—É */
    .header {
      width: 80%;
      background: white;
      padding: 20px;
      text-align: center;
      border-radius: 20px;
      margin-top: 20px;
      z-index: 1;
      position: relative;
    }

    /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .container {
      display: flex;
      width: 900px;
      background: rgba(255, 69, 0, 0.1);
      border-radius: 10px;
      overflow: hidden;
      z-index: 1;
      position: relative;
    }

    /* –õ–µ–≤–∞—è –∏ –ø—Ä–∞–≤–∞—è —á–∞—Å—Ç—å */
    .left,
    .right {
      flex: 1;
      padding: 40px;
      position: relative;
      color: white;
    }

    /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è (–∫—Ä–∞—Å–Ω–∞—è) */
    .left {
      border-right: 1px solid #d67c0f; /* –í–æ—Ç –æ–Ω–∞, "—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å" */
    }

    /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∏ –µ—ë —Ä–∞–º–∫–∞ */
    .left img {
      max-width: 100%;
      height: auto;
      border-radius: 15px; /* –°–ª–µ–≥–∫–∞ —Å–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —É–≥–ª—ã */
      position: relative;
      z-index: 2;
    }

    /* "–û–≥–Ω–µ–Ω–Ω–∞—è" –∞–Ω–∏–º–∞—Ü–∏—è –≤–æ–∫—Ä—É–≥ –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
    .fire-image-wrapper {
      position: relative;
      display: inline-block; /* –ß—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏—è –±—ã–ª–∞ –≤–æ–∫—Ä—É–≥ –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
    }

    .fire-image-wrapper::after {
      content: "";
      position: absolute;
      top: -10px;
      left: -10px;
      width: calc(100% + 20px);
      height: calc(100% + 20px);
      border-radius: 20px;
      background: radial-gradient(circle at 50% 50%, rgba(255,140,0,0.5), rgba(255,69,0,0.2), transparent 70%);
      animation: imageFlame 1.5s infinite ease-in-out alternate;
      pointer-events: none; /* –ß—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–æ –∫–ª–∏–∫–∞–º */
      z-index: 1;
    }

    @keyframes imageFlame {
      0% {
        transform: scale(0.95);
        opacity: 0.7;
      }
      100% {
        transform: scale(1.05);
        opacity: 0.4;
      }
    }

    /* –ü–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞ */
    .input-field {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ff4500;
      border-radius: 5px;
      background: rgba(255, 69, 0, 0.2);
      color: white;
      font-size: 18px;
    }

    .password-field {
      position: relative;
      margin: 10px 0;
    }
    .password-field .toggle-pass {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 20px;
      color: #ff8c00;
    }

    .button {
      width: 105.6%;
      padding: 10px;
      background: linear-gradient(to right, #ff4500, #ff8c00);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 69, 0, 0.9);
      animation: flicker 0.2s infinite alternate;
    }
    .button:hover {
      background: linear-gradient(to right, #ff8c00, #ff4500);
    }

    .links {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 14px;
    }
    .links a {
      color: #ff8c00;
      text-decoration: none;
    }

    /* ---------- ¬´–ì–æ—Ä—è—â–∏–π¬ª —Ç–µ–∫—Å—Ç "–í—Ö–æ–¥" —Å –∏—Å–∫—Ä–∞–º–∏ ---------- */
    #loginTitle.fire-text {
      position: relative;
      display: inline-block; /* –î–ª—è –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç–∞ */
      color: #fff;
      font-size: 28px;
      text-transform: uppercase;
      text-shadow:
        0 0 5px #ff4500,
        0 0 10px #ff8c00,
        0 0 15px #ff4500,
        0 0 20px #ff8c00;
      animation: burnFlicker 1.5s infinite linear;
    }
    /* "–ü–ª–∞–º—è" + –º–µ—Ä—Ü–∞–Ω–∏–µ */
    @keyframes burnFlicker {
      0% {
        text-shadow:
          0 0 5px #ff4500,
          0 0 10px #ff8c00,
          0 0 15px #ff4500,
          0 0 20px #ff8c00;
      }
      50% {
        text-shadow:
          0 0 8px #ff8c00,
          0 0 16px #ff4500,
          0 0 25px #ff8c00,
          0 0 30px #ff4500;
      }
      100% {
        text-shadow:
          0 0 5px #ff4500,
          0 0 10px #ff8c00,
          0 0 15px #ff4500,
          0 0 20px #ff8c00;
      }
    }

    /* "–ò—Å–∫—Ä—ã" ‚Äî –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–µ–ª–∫–∏–µ –æ–≥–Ω–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏, ¬´—É–ª–µ—Ç–∞—é—â–∏–µ¬ª –≤–≤–µ—Ä—Ö */
    #loginTitle.fire-text::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: -5px;
      width: 2px;
      height: 2px;
      background: radial-gradient(circle, rgba(255,255,0,1), rgba(255,140,0,0.5));
      border-radius: 50%;
      animation: sparks 1s infinite linear;
      pointer-events: none;
    }
    @keyframes sparks {
      0% {
        transform: translateX(-50%) translateY(0) scale(1);
        opacity: 1;
      }
      50% {
        transform: translateX(-50%) translateY(-40px) scale(0.6);
        opacity: 0.7;
      }
      100% {
        transform: translateX(-50%) translateY(-80px) scale(0.3);
        opacity: 0;
      }
    }
  </style>
</head>
<body>

  <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–¥–æ–∂–¥—å –∏ —è–∑—ã–∫) –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞ -->
  <div class="top-controls">
    <button id="langToggle">ENG</button>
    <button id="rainToggle">Rain ON</button>
  </div>

  <div class="header fire-border">
    <h1 id="pageTitle">NickAzula</h1>
    <p id="pageSubtitle">Reinvents finance</p>
    <div class="flame"></div>
  </div>

  <div class="container fire-border">
    <div class="left">
      <!-- –û–±–µ—Ä–Ω—ë–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π div –¥–ª—è "–æ–≥–Ω–µ–Ω–Ω–æ–π" —Ä–∞–º–∫–∏ -->
      <div class="fire-image-wrapper">
        <img src="{{ url_for('static', filename='images/azula.png') }}" alt="Logo">
      </div>
      <div class="flame"></div>
    </div>
    <div class="right">
      <!-- "–ì–æ—Ä—è—â–∏–π" –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <h2 id="loginTitle" class="fire-text">–í—Ö–æ–¥</h2>

      <input
        type="text"
        class="input-field"
        id="usernameField"
        placeholder="–õ–æ–≥–∏–Ω –∏–ª–∏ –ø–æ—á—Ç–∞"
      />

      <!-- –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è + –∏–∫–æ–Ω–∫–∞ –≥–ª–∞–∑ -->
      <div class="password-field">
        <input
          type="password"
          class="input-field"
          id="passwordField"
          placeholder="–ü–∞—Ä–æ–ª—å"
        />
        <span class="toggle-pass" id="togglePass">üëÅÔ∏è</span>
      </div>

      <button class="button" id="signInBtn">–í–æ–π—Ç–∏</button>

      <div class="links">
        <a href="#" id="forgotLink">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
        <a id="registerLink" href="{{ url_for('registration_page') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
      </div>
      <div class="flame"></div>
    </div>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç –¥–æ–∂–¥—è -->
  <script type="text/javascript">
    ;(function(window, document) {
      var Vector2 = (function() {
        function Vector2(x, y) {
          this.x = x || 0;
          this.y = y || 0;
        }
        return Vector2;
      })();
      Vector2.prototype.add = function(addend) {
        this.x += addend.x;
        this.y += addend.y;
      };

      var RainDrop = (function() {
        function RainDrop(parent) {
          this.size = 2;
          this.parent = parent;
          this.init();
        }
        return RainDrop;
      })();

      RainDrop.prototype.init = function() {
        this.life = 0;
        this.ttl = Math.random() * 500 + 300;
        this.position = new Vector2(Math.random() * window.innerWidth, 0);
        this.velocity = new Vector2(0.5 - Math.random() * 1, Math.random() * 1 + 0.2);
        this.terminalVelocity = 8;
      };
      RainDrop.prototype.update = function() {
        if (this.position.x > window.innerWidth || this.position.x < -this.size || this.life > this.ttl) {
          this.init();
        }
        if (this.position.y > this.parent.floor) {
          this.position.y = this.parent.floor - this.size;
          this.velocity.y *= -0.2 - Math.random() * 0.2;
        }
        this.life++;
        this.position.add(this.velocity);
        this.velocity.y += 0.1;
      };

      var Rain = (function() {
        function Rain(args) {
          this.props = args;
          // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –¥–æ–∂–¥—å –≤—ã–∫–ª—é—á–µ–Ω
          this.isRaining = false;
          this.rainDrops = [];
          this.init();
        }
        return Rain;
      })();

      Rain.prototype.init = function() {
        this.createCanvas();
        this.resize();
        this.loop();
      };

      // –ú–µ—Ç–æ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –¥–æ–∂–¥—è
      Rain.prototype.toggle = function() {
        if (this.isRaining) {
          this.isRaining = false;
          // –£–¥–∞–ª—è–µ–º canvas
          if (this.canvas.parentNode) {
            this.canvas.parentNode.removeChild(this.canvas);
          }
        } else {
          this.isRaining = true;
          document.body.appendChild(this.canvas);
          this.loop();
        }
      };

      Rain.prototype.resize = function() {
        var attr = 'position: absolute; z-index: 0; top: 0; left: 0; height: 100vh; width: 100vw;';
        this.canvas.setAttribute('style', attr);
        this.dimensions = {
          width: window.innerWidth,
          height: window.innerHeight
        };
        this.canvas.width = this.dimensions.width;
        this.canvas.height = this.dimensions.height;
        this.floor = this.dimensions.height * 0.7;
      };

      Rain.prototype.createCanvas = function() {
        this.canvas = document.createElement('canvas');
        this.ctx = this.canvas.getContext('2d');
        document.body.appendChild(this.canvas);
      };

      Rain.prototype.draw = function() {
        // –§–æ–Ω –¥–æ–∂–¥—è (–ø–æ–ª–Ω–æ—Å—Ç—å—é —á—ë—Ä–Ω—ã–π)
        this.ctx.fillStyle = this.props.backgroundColor;
        this.ctx.fillRect(0, 0, this.dimensions.width, this.floor);

        // –ö–∞–ø–ª–∏ –¥–æ–∂–¥—è
        for (var i = 0, len = this.rainDrops.length; i < len; i++) {
          var rainDrop = this.rainDrops[i];
          rainDrop.update();
          this.ctx.fillStyle = this.props.rainColor;
          this.ctx.fillRect(rainDrop.position.x, rainDrop.position.y, rainDrop.size, rainDrop.size);
        }

        // –û—Ç—Ä–∞–∂–µ–Ω–∏–µ —Å–Ω–∏–∑—É
        this.reflect();
      };

      Rain.prototype.reflect = function() {
        var grad = this.ctx.createLinearGradient(
          this.dimensions.width / 2,
          this.floor * 0.6,
          this.dimensions.width / 2,
          this.floor
        );
        grad.addColorStop(0, 'rgba(20,30,40,1)');
        grad.addColorStop(1, 'rgba(20,30,40,0)');
        this.ctx.save();
        this.ctx.scale(1, -1);
        this.ctx.translate(0, this.floor * -2);
        this.ctx.filter = 'blur(2px) saturate(150%)';
        this.ctx.drawImage(
          this.canvas,
          0,
          0,
          this.dimensions.width,
          this.floor,
          0,
          0,
          this.dimensions.width,
          this.floor
        );
        this.ctx.fillStyle = grad;
        this.ctx.fillRect(0, 0, this.dimensions.width, this.floor);
        this.ctx.restore();
      };

      Rain.prototype.loop = function() {
        if (!this.isRaining) return;
        var self = this;
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–ø–ª–∏
        if (self.rainDrops.length < self.props.rainDropCount) {
          setTimeout(function() {
            self.rainDrops.push(new RainDrop(self));
          }, Math.random() * 200);
        }

        self.draw();
        self.animationId = window.requestAnimationFrame(self.loop.bind(self));
      };

      window.rainInstance = null;

      window.onload = function() {
        var args = {
          rainDropCount: 500,
          rainColor: 'rgba(150,180,255,0.8)',
          backgroundColor: 'rgba(0,0,0,1)'
        };
        window.rainInstance = new Rain(args);

        window.onresize = function() {
          window.rainInstance.resize();
        };
      };

      window.requestAnimationFrame = (function() {
        return window.requestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          window.oRequestAnimationFrame ||
          window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
      })();
    })(this, document);
  </script>

  <!-- –°–∫—Ä–∏–ø—Ç —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —è–∑—ã–∫–∞ –∏ –≥–ª–∞–∑–æ–º –ø–∞—Ä–æ–ª—è -->
  <script>
    const translations = {
      ru: {
        pageTitle: "NickAzula",
        pageSubtitle: "Reinvents finance",
        loginTitle: "–í—Ö–æ–¥",
        usernamePlaceholder: "–õ–æ–≥–∏–Ω –∏–ª–∏ –ø–æ—á—Ç–∞",
        passwordPlaceholder: "–ü–∞—Ä–æ–ª—å",
        signInButton: "–í–æ–π—Ç–∏",
        forgotLink: "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?",
        registerLink: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"
      },
      en: {
        pageTitle: "NickAzula",
        pageSubtitle: "Reinvents finance",
        loginTitle: "Login",
        usernamePlaceholder: "Username or Email",
        passwordPlaceholder: "Password",
        signInButton: "Sign In",
        forgotLink: "Forgot password?",
        registerLink: "Sign Up"
      }
    };

    let currentLang = "ru";

    function setLanguage(lang) {
      currentLang = lang;

      const pageTitleElem = document.getElementById("pageTitle");
      const pageSubtitleElem = document.getElementById("pageSubtitle");
      const loginTitleElem = document.getElementById("loginTitle");
      const usernameField = document.getElementById("usernameField");
      const passwordField = document.getElementById("passwordField");
      const signInBtn = document.getElementById("signInBtn");
      const forgotLink = document.getElementById("forgotLink");
      const registerLink = document.getElementById("registerLink");

      pageTitleElem.textContent = translations[lang].pageTitle;
      pageSubtitleElem.textContent = translations[lang].pageSubtitle;
      loginTitleElem.textContent = translations[lang].loginTitle;
      usernameField.placeholder = translations[lang].usernamePlaceholder;
      passwordField.placeholder = translations[lang].passwordPlaceholder;
      signInBtn.textContent = translations[lang].signInButton;
      forgotLink.textContent = translations[lang].forgotLink;
      registerLink.textContent = translations[lang].registerLink;

      // –ü—Ä–∏–º–µ—Ä "–∂–∏—Ä–Ω–æ–≥–æ" —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
      if (lang === "ru") {
        forgotLink.style.fontFamily = "Arial Black, sans-serif";
        forgotLink.style.fontWeight = "bold";

        registerLink.style.fontFamily = "Arial Black, sans-serif";
        registerLink.style.fontWeight = "bold";
      } else {
        forgotLink.style.fontFamily = "";
        forgotLink.style.fontWeight = "";

        registerLink.style.fontFamily = "";
        registerLink.style.fontWeight = "";
      }
    }

    document.addEventListener("DOMContentLoaded", function() {
      setLanguage(currentLang);

      const langToggleBtn = document.getElementById("langToggle");
      langToggleBtn.addEventListener("click", function() {
        if (currentLang === "ru") {
          setLanguage("en");
          this.textContent = "RU";
        } else {
          setLanguage("ru");
          this.textContent = "ENG";
        }
      });

      const rainToggleBtn = document.getElementById("rainToggle");
      rainToggleBtn.addEventListener("click", function() {
        if (window.rainInstance) {
          window.rainInstance.toggle();
          if (window.rainInstance.isRaining) {
            this.textContent = "Rain OFF";
          } else {
            this.textContent = "Rain ON";
          }
        }
      });

      // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –ø–∞—Ä–æ–ª—è
      const togglePassIcon = document.getElementById("togglePass");
      togglePassIcon.addEventListener("click", function() {
        const passField = document.getElementById("passwordField");
        if (passField.type === "password") {
          passField.type = "text";
        } else {
          passField.type = "password";
        }
      });
    });
  </script>

  <script>
  document.getElementById("signInBtn").addEventListener("click", async function() {
      const username = document.getElementById("usernameField").value;
      const password = document.getElementById("passwordField").value;
  
      const response = await fetch("/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, password })
      });
  
      const data = await response.json();
      if (response.ok) {
          window.location.href = "/home";
      } else {
          alert(data.message);
      }
  });
  
  // document.getElementById("registerLink").addEventListener("click", async function() {
  //     const username = prompt("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:");
  //     const password = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:");
  
  //     if (username && password) {
  //         const response = await fetch("/register", {
  //             method: "POST",
  //             headers: { "Content-Type": "application/json" },
  //             body: JSON.stringify({ username, password })
  //         });
  
  //         const data = await response.json();
  //         alert(data.message);
  //     }
  // });
  </script>
  



</body>
</html>
